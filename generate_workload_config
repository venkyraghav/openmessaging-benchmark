#!/bin/bash


topic_cnt=1
partitions=6
payloadsize=100
payloadsizedesc="100b"
tpses="10 20 50 100 200 500 1000 2000 5000 10000"

filename_part="uwm/workloads/${topic_cnt}-topic-${partitions}-partition-${payloadsizedesc}"

for tps in ${tpses}
do
  filename="${filename_part}-${tps}tps.yaml"
  echo ${filename}
  echo "# Auto generated by Venky" > ${filename}
  echo "" >> ${filename}
  echo "name: ${topic_cnt} topic / ${partitions} partition / ${payloadsizedesc} / ${tps}tps" >> ${filename}
  echo "topics: ${topic_cnt}" >> ${filename}
  echo "partitionsPerTopic: ${partitions}" >> ${filename}
  echo "messageSize: ${payloadsize}" >> ${filename}
  echo "payloadFile: ""payload/payload-${payloadsizedesc}.data"" " >> ${filename}
  echo "subscriptionsPerTopic: 1" >> ${filename}
  echo "consumerPerSubscription: 1" >> ${filename}
  echo "producersPerTopic: 1" >> ${filename}
  echo "producerRate: ${tps}" >> ${filename}
  echo "consumerBacklogSizeGB: 0" >> ${filename}
  echo "testDurationMinutes: 15" >> ${filename}
  echo "" >> ${filename}
done
